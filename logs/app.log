2025-03-21 03:24:10,438 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 03:29:32,147 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-21 03:29:59,538 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 03:35:22,749 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-21 03:35:50,336 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 03:35:50,399 - app.api.endpoints.embed - INFO - Received embedding request for text: This is a test embedding...
2025-03-21 03:35:51,279 - app.api.endpoints.embed - INFO - Embedding generated successfully
2025-03-21 06:27:15,458 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-21 06:27:42,039 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 06:27:42,044 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-21 06:29:16,560 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 06:29:37,863 - app.api.endpoints.rag_query - INFO - Received RAG query: test question...
2025-03-21 06:29:37,869 - app.core.rag - INFO - Processing RAG query: test question...
2025-03-21 06:29:38,290 - app.core.retrieval - INFO - Generated embedding for query: 'test question...'
2025-03-21 06:29:38,293 - app.core.clients - INFO - Initializing Pinecone client
2025-03-21 06:29:38,297 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-21 06:29:40,557 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-21 06:29:40,560 - app.core.rag - INFO - Reranking results (placeholder)
2025-03-21 06:29:40,565 - app.core.rag - INFO - RAG response generated successfully
2025-03-21 06:30:12,461 - app.api.endpoints.rag_query - INFO - Received RAG query: hey...
2025-03-21 06:30:12,471 - app.core.rag - INFO - Processing RAG query: hey...
2025-03-21 06:30:12,813 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-21 06:30:12,815 - app.core.clients - INFO - Initializing Pinecone client
2025-03-21 06:30:12,819 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-21 06:30:14,000 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-21 06:30:14,006 - app.core.rag - INFO - Reranking results (placeholder)
2025-03-21 06:30:14,010 - app.core.rag - INFO - RAG response generated successfully
2025-03-21 06:30:56,878 - app.api.endpoints.rag_query - INFO - Received RAG query: how are you...
2025-03-21 06:30:56,886 - app.core.rag - INFO - Processing RAG query: how are you...
2025-03-21 06:30:57,081 - app.core.retrieval - INFO - Generated embedding for query: 'how are you...'
2025-03-21 06:30:57,082 - app.core.clients - INFO - Initializing Pinecone client
2025-03-21 06:30:57,086 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-21 06:30:57,987 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-21 06:30:57,993 - app.core.rag - INFO - Reranking results (placeholder)
2025-03-21 06:30:57,997 - app.core.rag - INFO - RAG response generated successfully
2025-03-21 23:20:08,259 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 23:20:50,515 - app.api.endpoints.embed - INFO - Received embedding request for text: This is a test embedding...
2025-03-21 23:20:50,890 - app.api.endpoints.embed - INFO - Embedding generated successfully
2025-03-21 23:22:09,091 - app.api.endpoints.embed - INFO - Received embedding request for text: This is a test embedding...
2025-03-21 23:22:09,488 - app.api.endpoints.embed - INFO - Embedding generated successfully
2025-03-21 23:22:26,070 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-21 23:24:17,157 - app.main - INFO - Application startup: initializing services and connections
2025-03-21 23:46:47,781 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:17:48,457 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:18:00,175 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 59, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/auth.py", line 28, in register
    result = await appwrite_users.create(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
TypeError: object dict can't be used in 'await' expression

2025-03-25 00:18:26,957 - app.main - ERROR - Request failed: 'Account' object has no attribute 'create_email_session'
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 59, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/auth.py", line 41, in login
    session = await appwrite_account.create_email_session(user.email, user.password)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Account' object has no attribute 'create_email_session'. Did you mean: 'create_email_token'?

2025-03-25 00:18:33,437 - app.main - ERROR - Request failed: 'Account' object has no attribute 'create_email_session'
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 59, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/auth.py", line 41, in login
    session = await appwrite_account.create_email_session(user.email, user.password)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Account' object has no attribute 'create_email_session'. Did you mean: 'create_email_token'?

2025-03-25 00:19:19,320 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 59, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/auth.py", line 28, in register
    result = await appwrite_users.create(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
TypeError: object dict can't be used in 'await' expression

2025-03-25 00:21:36,788 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:21:58,072 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:23:32,249 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:23:52,888 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:26:44,913 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:26:59,188 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:34:05,693 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:34:49,049 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:35:16,490 - app.api.endpoints.auth - ERROR - Unexpected login error: 'Account' object has no attribute 'create_email_session'
2025-03-25 00:35:31,856 - app.api.endpoints.auth - ERROR - Appwrite registration error: A user with the same id, email, or phone already exists in this project.
2025-03-25 00:35:39,695 - app.api.endpoints.auth - ERROR - Unexpected login error: 'Account' object has no attribute 'create_email_session'
2025-03-25 00:37:52,589 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:42:30,752 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:43:56,911 - app.api.endpoints.auth - ERROR - Unexpected login error: Account.create_session() got an unexpected keyword argument 'email'
2025-03-25 00:46:08,998 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:46:23,573 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:48:01,288 - app.api.endpoints.auth - INFO - create_session signature: (user_id: str, secret: str)
2025-03-25 00:48:01,532 - app.api.endpoints.auth - ERROR - Login error: Invalid `userId` param: Parameter must contain at most 36 chars. Valid chars are a-z, A-Z, 0-9, period, hyphen, and underscore. Can't start with a special char
2025-03-25 00:49:58,840 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:50:15,113 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:50:37,886 - app.api.endpoints.auth - ERROR - Appwrite login error: Invalid `queries` param: Invalid query: Invalid query: Syntax error
2025-03-25 00:51:41,387 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:51:55,702 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:53:10,255 - app.api.endpoints.auth - ERROR - Appwrite login error: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (account)
2025-03-25 00:53:22,586 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:53:51,715 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:55:59,962 - app.api.endpoints.auth - ERROR - Login error: 'Settings' object has no attribute 'SECRET_KEY'
2025-03-25 00:56:16,926 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:56:32,142 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 00:56:45,540 - app.api.endpoints.auth - ERROR - Appwrite login error: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (account)
2025-03-25 00:56:47,364 - app.api.endpoints.auth - ERROR - Fallback login error: 'Settings' object has no attribute 'SECRET_KEY'
2025-03-25 00:56:54,303 - app.api.endpoints.auth - ERROR - Appwrite login error: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (account)
2025-03-25 00:56:54,581 - app.api.endpoints.auth - ERROR - Fallback login error: 'Settings' object has no attribute 'SECRET_KEY'
2025-03-25 00:57:47,144 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 00:58:04,671 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:12:53,634 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:13:09,011 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:16:51,078 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:17:06,158 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:18:50,038 - app.api.dependencies - INFO - Attempting to get session with token: 67e20...
2025-03-25 01:18:50,039 - app.api.dependencies - ERROR - Failed to get session: Account.get_session() got an unexpected keyword argument 'sessionId'. Did you mean 'session_id'?
2025-03-25 01:18:50,242 - app.api.dependencies - ERROR - Authentication failed: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (account)
2025-03-25 01:18:18,834 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:18:36,443 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:19:47,820 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:20:03,557 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:29:30,710 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:29:48,042 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:30:02,575 - app.api.endpoints.auth - ERROR - Login error: Invalid `queries` param: Invalid query: Invalid query: Syntax error
2025-03-25 01:30:02,576 - app.api.endpoints.auth - ERROR - Login error: 401: Invalid credentials
2025-03-25 01:32:53,117 - app.api.endpoints.auth - ERROR - Login error: Invalid `queries` param: Invalid query: Invalid query: Syntax error
2025-03-25 01:32:53,118 - app.api.endpoints.auth - ERROR - Login error: 401: Invalid credentials
2025-03-25 01:33:02,507 - app.api.endpoints.auth - ERROR - Login error: Invalid `queries` param: Invalid query: Invalid query: Syntax error
2025-03-25 01:33:02,508 - app.api.endpoints.auth - ERROR - Login error: 401: Invalid credentials
2025-03-25 01:33:17,462 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:34:15,325 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:34:23,718 - app.api.endpoints.auth - ERROR - Login error: Invalid `queries` param: Invalid query: Invalid query: Syntax error
2025-03-25 01:34:23,719 - app.api.endpoints.auth - ERROR - Login error: 401: Invalid credentials
2025-03-25 01:35:10,065 - app.api.endpoints.auth - ERROR - Login error: Invalid `queries` param: Invalid query: Invalid query: Syntax error
2025-03-25 01:35:10,065 - app.api.endpoints.auth - ERROR - Login error: 401: Invalid credentials
2025-03-25 01:35:37,913 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:35:54,298 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:41:36,217 - app.core.chat_service - ERROR - Failed to create conversation: object dict can't be used in 'await' expression
2025-03-25 01:42:47,237 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:43:01,406 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:44:12,958 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:47:36,939 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:48:38,218 - app.core.chat_service - ERROR - Failed to create conversation: Invalid document structure: Unknown attribute: "updated_at"
2025-03-25 01:53:15,104 - app.core.chat_service - ERROR - Failed to create conversation: Invalid document structure: Unknown attribute: "updated_at"
2025-03-25 01:53:20,334 - app.core.chat_service - ERROR - Failed to create conversation: Invalid document structure: Unknown attribute: "updated_at"
2025-03-25 01:53:21,931 - app.core.chat_service - ERROR - Failed to create conversation: Invalid document structure: Unknown attribute: "updated_at"
2025-03-25 01:53:56,936 - app.core.chat_service - ERROR - Failed to create conversation: Invalid document structure: Unknown attribute: "updated_at"
2025-03-25 01:55:09,051 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 01:54:23,534 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 01:57:03,209 - app.core.rag - INFO - Processing RAG query: Tell me about Arabia...
2025-03-25 01:57:03,853 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Arabia...'
2025-03-25 01:57:03,853 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 01:57:03,857 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 01:57:06,065 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 01:57:06,066 - app.core.rag - INFO - Reranking results (placeholder)
2025-03-25 01:57:06,067 - app.core.rag - INFO - RAG response generated successfully
2025-03-25 02:02:31,973 - app.core.rag - INFO - Processing RAG query: Tell me about Arabia...
2025-03-25 02:02:32,518 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Arabia...'
2025-03-25 02:02:32,519 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 02:02:32,522 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 02:02:33,617 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 02:02:33,619 - app.core.rag - INFO - Reranking results (placeholder)
2025-03-25 02:02:33,620 - app.core.rag - INFO - RAG response generated successfully
2025-03-25 02:08:35,319 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 03:10:33,012 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 03:12:28,977 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Arabia...'
2025-03-25 03:12:28,978 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 03:12:28,981 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 03:12:29,965 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 03:12:29,966 - app.core.chat_service - ERROR - Error in RAG pipeline: 'DocumentMatch' object has no attribute 'text_snippet'
2025-03-25 03:15:31,596 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 03:15:46,958 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 03:20:57,343 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 03:21:12,273 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 03:29:07,355 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 03:28:33,433 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 03:29:59,730 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 03:30:17,750 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 03:31:19,238 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 03:31:34,430 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 03:36:38,281 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 05:44:09,591 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 05:46:31,189 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Arabia...'
2025-03-25 05:46:31,191 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 05:46:31,194 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 05:46:32,809 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 05:50:27,313 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about fiqh...'
2025-03-25 05:50:27,314 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 05:50:27,316 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 05:50:28,230 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 05:49:37,561 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 05:49:54,361 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 05:52:08,983 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:10:38,181 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:29:09,074 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:29:27,849 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:30:34,658 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:30:48,524 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:33:06,496 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:39:10,078 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:41:21,443 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:40:37,049 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:42:51,213 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:45:09,556 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:47:54,419 - app.api.endpoints.auth - INFO - Created anonymous session: anon_327a7ded651e328c
2025-03-25 17:49:45,510 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Arabia...'
2025-03-25 17:49:45,512 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 17:49:45,515 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 17:49:49,119 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 17:49:49,343 - app.core.chat_service - ERROR - API Error: 400 - {"object":"error","message":"Invalid model: mistral-sabaa","type":"invalid_model","param":null,"code":"1500"}
2025-03-25 17:49:19,861 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about fiqh...'
2025-03-25 17:49:19,862 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 17:49:19,866 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 17:49:20,369 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 17:49:20,580 - app.core.chat_service - ERROR - API Error: 400 - {"object":"error","message":"Invalid model: mistral-sabaa","type":"invalid_model","param":null,"code":"1500"}
2025-03-25 17:51:55,392 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:52:09,476 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:53:15,279 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:53:39,493 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:55:17,155 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:56:36,577 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:57:52,259 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:58:08,072 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:58:26,692 - app.api.endpoints.auth - INFO - Created anonymous session: anon_fb2d05c34cb684a5
2025-03-25 17:59:00,336 - app.main - ERROR - Request failed: 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 63, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 21, in send_message
    is_anonymous = user.get("is_anonymous", False)
                   ^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'

2025-03-25 17:59:13,175 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 17:59:27,516 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 17:59:27,642 - app.main - ERROR - Request failed: 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 63, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 21, in send_message
    is_anonymous = user.get("is_anonymous", False)
                   ^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'

2025-03-25 18:02:03,948 - app.main - ERROR - Request failed: 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 63, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 21, in send_message
    is_anonymous = user.get("is_anonymous", False)
                   ^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'

2025-03-25 18:02:34,579 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 18:02:49,967 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 18:02:50,093 - app.main - ERROR - Request failed: 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 63, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 21, in send_message
    is_anonymous = user.get("is_anonymous", False)
                   ^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'

2025-03-25 18:05:17,386 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-25 18:05:31,557 - app.main - INFO - Application startup: initializing services and connections
2025-03-25 18:09:52,588 - app.core.chat_service - INFO - Anonymous user message, not storing in database
2025-03-25 18:09:53,037 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about fiqh...'
2025-03-25 18:09:53,037 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 18:09:53,040 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 18:09:54,753 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 18:08:56,770 - app.core.chat_service - INFO - Anonymous user message, not storing in database
2025-03-25 22:28:22,049 - app.core.chat_service - INFO - Anonymous user message, not storing in database
2025-03-25 22:28:22,659 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about fiqh...'
2025-03-25 22:28:22,661 - app.core.clients - INFO - Initializing Pinecone client
2025-03-25 22:28:22,698 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-25 22:28:23,862 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-25 22:28:26,989 - app.core.chat_service - INFO - Anonymous user message, not storing in database
2025-03-26 00:58:47,233 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 00:58:47,240 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 00:58:47,297 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 00:58:48,206 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 00:58:48,403 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 00:58:48,578 - app.core.chat_service - ERROR - Failed to store message: Invalid document structure: Unknown attribute: "sources"
2025-03-26 00:58:57,387 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 00:58:57,388 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 00:58:57,391 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 00:58:58,230 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 00:59:06,053 - app.core.chat_service - ERROR - Failed to store message: Invalid document structure: Unknown attribute: "sources"
2025-03-26 01:10:31,962 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 01:10:49,405 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 01:35:55,979 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 01:36:14,441 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 01:36:14,921 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 01:36:14,923 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:36:14,926 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:36:16,815 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:38:34,203 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 01:38:50,705 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 01:38:50,753 - app.api.endpoints.auth - INFO - Created anonymous session: anon_d387e7430af1e011
2025-03-26 01:39:45,033 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence (fiqh)...'
2025-03-26 01:39:45,034 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:39:45,038 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:39:46,385 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:40:58,549 - app.core.retrieval - INFO - Generated embedding for query: 'What are the schools of Islamic thought?...'
2025-03-26 01:40:58,549 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:40:58,554 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:40:59,343 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:42:29,794 - app.api.endpoints.auth - ERROR - Registration error: A user with the same id, email, or phone already exists in this project.
2025-03-26 01:45:53,562 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 01:47:10,061 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 01:54:05,825 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 01:56:46,900 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 01:57:26,285 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 01:57:26,285 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:57:26,290 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:57:27,878 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:57:37,109 - app.core.retrieval - INFO - Generated embedding for query: 'what was my last message...'
2025-03-26 01:57:37,109 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:57:37,113 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:57:37,893 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:57:49,077 - app.core.retrieval - INFO - Generated embedding for query: 'are you sure...'
2025-03-26 01:57:49,077 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:57:49,082 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:57:49,723 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:58:24,810 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:27,092 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:25,748 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:26,313 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:26,842 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:27,294 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:27,757 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:28,290 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:28,730 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:29,241 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:29,755 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:32,103 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:31,128 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 01:58:31,129 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:58:31,132 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:58:31,939 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:58:33,125 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 01:58:33,380 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:33,918 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:34,433 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:34,865 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:35,400 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:36,141 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 01:58:36,142 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 01:58:36,145 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 01:58:37,043 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 01:58:38,146 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 01:58:38,335 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:38,672 - app.core.embeddings - ERROR - Error generating embedding: API error occurred: Status 429
{"message":"Requests rate limit exceeded"}
2025-03-26 01:58:38,672 - app.core.retrieval - ERROR - Failed to generate embedding for query: 'hey'
2025-03-26 01:58:38,673 - app.core.chat_service - WARNING - No relevant documents found for query
2025-03-26 01:58:39,363 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:41,004 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:41,486 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:41,954 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:42,386 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:42,856 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:43,521 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:43,990 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:44,491 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:47,234 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:45,904 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:46,397 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:46,923 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:47,467 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:47,985 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:48,383 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:48,881 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:49,380 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:51,013 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:51,529 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:52,062 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:52,630 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:53,060 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:53,558 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:54,071 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:54,590 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:55,108 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:55,631 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:56,157 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:56,681 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:57,139 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:57,652 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:58,169 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:58,623 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:59,034 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:58:59,594 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:00,101 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:00,538 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:01,052 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:01,611 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:02,065 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:02,634 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:03,172 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:03,739 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:04,364 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:04,850 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:00:07,206 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:05,903 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:06,450 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:06,920 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:07,393 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:07,909 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:08,451 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:08,909 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:09,457 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:09,971 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:00:12,267 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:10,974 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:11,494 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:12,014 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:12,534 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:13,069 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:13,568 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:14,068 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:14,592 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:15,059 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:15,529 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:16,054 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:17,565 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:18,156 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:19,115 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:19,560 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:19,993 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:20,510 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:21,010 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:21,447 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:21,941 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:22,426 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:22,965 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:23,495 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:24,113 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:24,489 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:25,066 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:25,718 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:26,219 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:26,747 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:27,357 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:27,831 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:28,324 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:28,899 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:29,351 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:29,843 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:30,327 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:30,759 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:31,184 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:31,746 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:32,291 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:32,822 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:33,792 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:34,310 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:34,816 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:35,340 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:35,930 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:36,942 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:37,770 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:38,620 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:39,373 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:41,711 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:42,385 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:43,744 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:44,604 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:45,207 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:45,833 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:46,114 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:46,686 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:47,246 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:47,845 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:48,444 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:48,960 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:49,713 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:49,911 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:50,536 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:50,696 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:52,138 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:53,818 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:53,952 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:54,148 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:54,346 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:55,667 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:55,883 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:56,332 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:56,667 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:57,585 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:57,926 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 01:59:58,381 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:00:03,336 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:00:03,768 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:00:04,342 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:00:04,587 - app.core.chat_service - ERROR - Failed to list conversations: app.67df69ef0039756850bd@service.cloud.appwrite.io (role: applications) missing scope (documents.read)
2025-03-26 02:06:26,317 - app.core.retrieval - INFO - Generated embedding for query: 'What are the schools of Islamic thought?...'
2025-03-26 02:06:26,318 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:06:26,332 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:06:27,645 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:08:00,539 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:01,820 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:02,742 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:03,366 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:08:03,367 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:08:03,417 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:08:08,113 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:08:09,325 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:08:09,793 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:10,358 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:10,854 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:11,375 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:11,952 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:12,445 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:13,118 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:13,562 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:14,594 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:15,157 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:15,603 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:16,122 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:16,688 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:17,207 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:17,640 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:18,156 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:18,693 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:19,188 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:19,655 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:20,137 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:20,654 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:21,165 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:21,705 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:22,217 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:22,742 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:23,314 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:24,186 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:24,893 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:25,401 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:25,914 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:26,440 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:27,041 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:27,566 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:28,152 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:28,756 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:29,379 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:29,985 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:30,555 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:31,121 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:31,717 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:32,202 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:32,855 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:33,451 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:34,037 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:35,585 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:36,172 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:36,697 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:37,357 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:38,110 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:38,680 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:39,235 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:39,802 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:40,340 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:08:41,017 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:32,130 - app.core.retrieval - INFO - Generated embedding for query: 'What are the schools of Islamic thought?...'
2025-03-26 02:12:32,132 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:12:32,140 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:12:33,077 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:12:33,355 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:11:46,067 - app.core.retrieval - INFO - Generated embedding for query: 'What are the schools of Islamic thought?...'
2025-03-26 02:11:46,080 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:11:46,112 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:11:50,052 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:12:37,214 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:38,055 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:39,362 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:40,681 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:41,310 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:42,432 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:12:42,447 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:12:42,569 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:12:43,634 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:12:43,830 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:12:44,139 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:12:44,653 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:45,129 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:47,480 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:46,287 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:46,895 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:47,346 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:47,882 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:48,377 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:48,911 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:49,592 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:50,193 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:51,652 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:52,162 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:52,685 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:53,100 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:53,584 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:54,096 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:54,710 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:55,261 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:55,812 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:56,371 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:56,894 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:57,372 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:57,929 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:58,349 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:58,884 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:59,438 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:12:59,987 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:00,561 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:01,209 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:01,770 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:02,333 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:02,968 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:03,963 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:13:04,583 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:17:05,603 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:16:23,387 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:17:44,713 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:17:59,373 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:19:12,017 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:20:30,249 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:20:30,579 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:31,070 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:31,269 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:31,875 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:32,069 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:32,624 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:32,806 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:33,325 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:33,515 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:34,084 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:34,224 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:33,193 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:33,440 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:34,047 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:34,293 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:34,876 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:35,098 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:35,751 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:35,915 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:36,486 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:36,659 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:37,232 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:37,428 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:38,020 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:38,210 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:38,852 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:39,049 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:39,635 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:19:39,635 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:19:39,638 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:19:40,970 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:19:42,245 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:19:43,265 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:43,418 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:44,039 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:44,243 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:44,880 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:45,082 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:45,644 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:45,836 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:46,432 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:46,627 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:47,197 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:47,350 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:49,027 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:50,339 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:50,830 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:53,966 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:54,434 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:54,930 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:55,555 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:56,093 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:19:56,610 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:00,036 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:00,492 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:01,026 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:01,716 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:02,383 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:02,823 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:03,352 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:03,839 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:04,520 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:04,989 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:05,512 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:05,946 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:06,496 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:07,077 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:07,589 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:08,086 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:08,534 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:09,053 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:09,746 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:10,164 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:10,734 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:11,390 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:11,872 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:12,409 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:12,827 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:13,347 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:13,815 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:14,318 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:14,832 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:13,525 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:14,077 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:14,614 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:15,128 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:15,655 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:16,135 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:16,647 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:17,105 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:17,604 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:21:19,808 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:18,432 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:19,214 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:19,728 - app.core.chat_service - ERROR - Failed to list conversations: Invalid query: Syntax error
2025-03-26 02:20:20,992 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:22:33,819 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:22:36,626 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:22:36,627 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:22:36,629 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:22:38,477 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:22:53,326 - app.core.retrieval - INFO - Generated embedding for query: 'nice to meet you...'
2025-03-26 02:22:53,326 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:22:53,329 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:22:53,990 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:22:54,170 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:24:09,834 - app.core.retrieval - INFO - Generated embedding for query: 'nice to meet you...'
2025-03-26 02:24:09,835 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:09,837 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:24:10,557 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:14,538 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:24:14,539 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:14,541 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:24:15,189 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:18,377 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:24:18,378 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:18,381 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:24:18,995 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:19,184 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:23:19,699 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:23:19,700 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:23:19,703 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:23:20,363 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:23:23,941 - app.core.retrieval - INFO - Generated embedding for query: ';nice...'
2025-03-26 02:23:23,942 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:23:23,945 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:23:24,583 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:23:24,846 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:23:27,160 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 02:23:27,160 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:23:27,164 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:23:27,855 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:23:35,376 - app.core.retrieval - INFO - Generated embedding for query: 'fiqh...'
2025-03-26 02:23:35,376 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:23:35,379 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:23:36,039 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:23:36,331 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:24:59,851 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:24:59,851 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:59,857 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:25:00,838 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:05,614 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 02:24:05,615 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:05,620 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:24:06,397 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:20,260 - app.api.endpoints.auth - INFO - Created anonymous session: anon_5ce3a1db32bab5c2
2025-03-26 02:24:25,576 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:24:25,576 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:25,579 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:24:26,235 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:52,915 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:24:52,915 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:24:52,918 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:24:53,633 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:24:54,762 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:25:19,897 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:25:19,897 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:25:19,900 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:25:20,615 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:25:21,753 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:25:56,055 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:25:56,055 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:25:56,059 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:25:56,862 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:25:57,935 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:26:31,612 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 02:26:31,613 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:26:31,623 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:26:32,407 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:27:36,632 - app.core.chat_service - ERROR - Failed to store message: Collection with the requested ID could not be found.
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 115, in call
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cloud.appwrite.io/v1/databases/arabia_db/collections/message_sources/documents

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/core/chat_service.py", line 108, in store_message
    appwrite_db.create_document(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        database_id="arabia_db",
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ]
        ^
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/services/databases.py", line 913, in create_document
    return self.client.call('post', api_path, {
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
        'content-type': 'application/json',
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    }, api_params)
    ^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/appwrite/client.py", line 135, in call
    raise AppwriteException(response.json()['message'], response.status_code, response.json().get('type'), response.text)
appwrite.exception.AppwriteException: Collection with the requested ID could not be found.
2025-03-26 02:29:50,635 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:30:09,966 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:32:30,514 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:32:46,853 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:35:40,938 - app.api.endpoints.auth - INFO - Created anonymous session: anon_5075459d7c504eb2
2025-03-26 02:35:42,017 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Al-Ghazali...'
2025-03-26 02:35:42,018 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:35:42,022 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:35:43,267 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:36:19,925 - app.api.endpoints.auth - INFO - Created anonymous session: anon_351e12bb901f360b
2025-03-26 02:36:20,930 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Al-Ghazali...'
2025-03-26 02:36:20,931 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:36:20,935 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:36:21,589 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:39:31,087 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:39:31,088 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:39:31,091 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:39:31,956 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:39:33,129 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 02:43:57,254 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:47:27,266 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:48:45,390 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:50:01,753 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:50:07,458 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:50:07,460 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:50:07,464 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:50:09,089 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:49:12,300 - app.core.retrieval - INFO - Generated embedding for query: 'wxhy thisd...'
2025-03-26 02:49:12,301 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:49:12,303 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:49:13,473 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:49:47,263 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:49:47,264 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:49:47,270 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:49:49,782 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:50:09,022 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:50:09,023 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:50:09,028 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:50:09,808 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:51:11,770 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:50:13,575 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:50:13,575 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:50:13,578 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:50:14,210 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:50:21,635 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 02:50:39,010 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 02:51:41,796 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:51:41,796 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:51:41,799 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:50:41,146 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:50:45,445 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:50:45,487 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:50:45,509 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:50:46,391 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:50:46,544 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:50:53,534 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 02:50:53,535 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:50:53,538 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:50:54,196 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:51:07,341 - app.core.retrieval - INFO - Generated embedding for query: 'kjigj...'
2025-03-26 02:51:07,342 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:51:07,346 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:51:08,093 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:52:10,933 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 02:52:11,045 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:52:11,159 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:52:12,166 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:52:13,421 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 02:53:26,589 - app.core.retrieval - INFO - Generated embedding for query: 'how are you...'
2025-03-26 02:53:26,590 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:53:26,593 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:53:27,294 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:53:27,500 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:53:28,010 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 02:53:44,638 - app.core.retrieval - INFO - Generated embedding for query: 'why i can upgrade the rate limit of this...'
2025-03-26 02:53:44,638 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:53:44,641 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:53:45,311 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:53:45,576 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 02:53:45,988 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 02:52:57,292 - app.core.retrieval - INFO - Generated embedding for query: 'i am starting to find this shit wait...'
2025-03-26 02:52:57,296 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 02:52:57,299 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 02:52:57,966 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 02:52:59,346 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 03:02:24,433 - app.api.endpoints.auth - ERROR - Registration error: Invalid `email` param: Value must be a valid email address
2025-03-26 03:03:39,929 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 03:03:39,930 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:03:39,948 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:02:39,113 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:02:40,352 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 03:03:19,004 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 03:03:19,008 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:03:19,113 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:03:19,865 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:03:21,348 - app.core.chat_service - WARNING - Could not store sources: Invalid document structure: Unknown attribute: "sources_json"
2025-03-26 03:03:42,328 - app.core.retrieval - INFO - Generated embedding for query: 'What are the schools of Islamic thought?...'
2025-03-26 03:03:42,330 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:03:42,335 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:03:43,241 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:13:22,430 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 03:13:39,416 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 03:19:52,752 - app.api.endpoints.auth - ERROR - Registration error: Invalid `email` param: Value must be a valid email address
2025-03-26 03:20:34,782 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 03:20:34,783 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:20:34,798 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:20:36,421 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:20:45,064 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 03:20:45,065 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:20:45,067 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:20:45,835 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:20:46,027 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 03:21:44,365 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 03:21:44,383 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:21:44,603 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:21:46,068 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:21:56,110 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 03:21:56,122 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:21:56,533 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:22:00,188 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:22:28,670 - app.core.retrieval - INFO - Generated embedding for query: 'jdfhbgufh...'
2025-03-26 03:22:28,672 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:22:28,676 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:22:29,507 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:31:05,128 - app.api.endpoints.auth - ERROR - Registration error: Invalid `password` param: Password must be between 8 and 265 characters long, and should not be one of the commonly used password.
2025-03-26 03:31:33,501 - app.core.retrieval - INFO - Generated embedding for query: 'hey...'
2025-03-26 03:31:33,512 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:31:33,610 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:31:34,624 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 03:31:45,788 - app.core.retrieval - INFO - Generated embedding for query: 'nice...'
2025-03-26 03:32:47,667 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 03:31:45,992 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 03:31:46,900 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 05:57:19,080 - app.api.endpoints.auth - INFO - Created anonymous session: anon_9dfa84b9d6460483
2025-03-26 05:57:21,201 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 05:57:21,203 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 05:57:21,255 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 05:57:22,489 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 05:56:31,473 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 05:56:31,473 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 05:56:31,476 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 05:56:35,359 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:01:42,293 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:01:42,296 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:01:42,327 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:01:44,071 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:01:54,236 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 06:01:54,236 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:01:54,255 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:01:55,398 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:02:04,816 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 06:02:04,817 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:02:04,822 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:02:06,783 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:02:13,418 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 06:02:13,421 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:02:13,431 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:02:14,189 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:14:18,384 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:14:18,388 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:14:18,422 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:14:19,671 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:14:32,050 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 06:14:32,050 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:14:32,287 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:14:36,478 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:14:57,153 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 06:14:57,154 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:14:57,159 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:14:58,477 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:15:07,600 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 06:15:07,600 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:15:07,605 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:15:08,298 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:16:57,790 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:17:18,259 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:18:31,921 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:18:47,642 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:18:51,067 - app.core.chat_service - INFO - Getting conversations for user: user_test8338
2025-03-26 06:18:51,234 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:18:52,408 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:18:52,409 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:18:52,414 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:18:56,230 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:19:04,337 - app.api.endpoints.chat - INFO - Looking for conversation: 67e39c4a173cc85f2bad for user: user_test8338
2025-03-26 06:19:04,539 - app.api.endpoints.chat - ERROR - Error getting conversation: object dict can't be used in 'await' expression
2025-03-26 06:19:05,865 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 06:19:05,866 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:19:05,869 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:19:06,836 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:19:21,497 - app.core.chat_service - INFO - Getting conversations for user: user_test8338
2025-03-26 06:19:21,706 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:19:22,795 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 06:19:22,795 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:19:22,799 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:19:23,862 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:19:31,204 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 06:19:31,205 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:19:31,208 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:19:32,203 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:21:42,921 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:22:03,557 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:24:39,339 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:24:59,199 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:25:05,716 - app.core.chat_service - INFO - Getting conversations for user: user_test2196
2025-03-26 06:25:05,923 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:25:06,950 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:25:06,951 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:25:06,955 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:25:12,683 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:25:21,357 - app.api.endpoints.chat - INFO - Looking for conversation: 67e39dc0b6bf8561f32d for user: user_test2196
2025-03-26 06:25:21,537 - app.api.endpoints.chat - INFO - Found conversation with user_id: user_test2196
2025-03-26 06:25:21,693 - app.api.endpoints.chat - ERROR - Error getting conversation: Invalid query: Syntax error
2025-03-26 06:25:22,674 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 06:25:22,674 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:25:22,678 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:25:24,044 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:26:40,641 - app.core.chat_service - INFO - Getting conversations for user: user_test2196
2025-03-26 06:25:39,829 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:25:40,667 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 06:25:40,669 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:25:40,672 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:25:41,933 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:25:50,338 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 06:25:50,338 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:25:50,341 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:25:51,291 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:26:30,795 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:27:03,180 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:34:41,379 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:35:04,690 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:37:05,668 - app.core.chat_service - INFO - Getting conversations for user: user_test28160
2025-03-26 06:37:05,893 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:37:07,011 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:37:07,012 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:37:07,016 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:37:10,883 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:37:19,123 - app.api.endpoints.chat - INFO - Found conversation: 67e3a09098296e783a48 for user: user_test28160
2025-03-26 06:37:20,260 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 06:37:20,260 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:37:20,263 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:37:21,380 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:37:35,320 - app.core.chat_service - INFO - Getting conversations for user: user_test28160
2025-03-26 06:37:35,583 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:37:36,365 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 06:37:36,365 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:37:36,368 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:37:37,811 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:37:38,034 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 06:37:40,768 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 06:37:40,769 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:37:40,772 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:37:41,716 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:38:59,411 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 06:38:14,304 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 06:38:20,333 - app.core.chat_service - INFO - Getting conversations for user: user_test29012
2025-03-26 06:38:20,499 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:38:22,156 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:38:22,157 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:38:22,160 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 06:38:25,192 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 06:47:25,451 - app.core.chat_service - INFO - Getting conversations for user: user_test10560
2025-03-26 06:47:25,669 - app.core.chat_service - ERROR - Failed to list conversations: object dict can't be used in 'await' expression
2025-03-26 06:47:27,289 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 06:47:27,289 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 06:47:27,302 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:35:50,895 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 17:38:23,466 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 54, in create_conversation
    return await create_new_conversation(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression

2025-03-26 17:38:24,418 - app.core.chat_service - INFO - Getting conversations for user: user_test7035
2025-03-26 17:38:24,628 - app.core.chat_service - INFO - Got 25 total conversations
2025-03-26 17:38:24,629 - app.core.chat_service - INFO - Checking conversation: 67e20992e4a9ccf3980f with user: user_test
2025-03-26 17:38:24,629 - app.core.chat_service - INFO - Checking conversation: 67e20cf759a7e3e0797f with user: user_test
2025-03-26 17:38:24,630 - app.core.chat_service - INFO - Checking conversation: 67e20e95286137d70962 with user: user_test
2025-03-26 17:38:24,630 - app.core.chat_service - INFO - Checking conversation: 67e21efb2e0c820f3ff3 with user: user_test
2025-03-26 17:38:24,631 - app.core.chat_service - INFO - Checking conversation: 67e24311342bd0d8d7e0 with user: user_test
2025-03-26 17:38:24,631 - app.core.chat_service - INFO - Checking conversation: 67e3513396ff4ff88972 with user: user_test
2025-03-26 17:38:24,632 - app.core.chat_service - INFO - Checking conversation: 67e35ac34f0ae09325a4 with user: anon_d387e7430af1e011
2025-03-26 17:38:24,635 - app.core.chat_service - INFO - Checking conversation: 67e35f0275edae84daf8 with user: anon_8a8de7db14bec1ad
2025-03-26 17:38:24,636 - app.core.chat_service - INFO - Checking conversation: 67e35f31733aa9cae4eb with user: anon_9d3322d358e4ea48
2025-03-26 17:38:24,637 - app.core.chat_service - INFO - Checking conversation: 67e35f31b4506633a1c4 with user: anon_3bcd8615f647df01
2025-03-26 17:38:24,638 - app.core.chat_service - INFO - Checking conversation: 67e35f31e811f6db7ce0 with user: anon_a979daf531748451
2025-03-26 17:38:24,639 - app.core.chat_service - INFO - Checking conversation: 67e35f41092689b251ad with user: user_walidaboulaakoul
2025-03-26 17:38:24,639 - app.core.chat_service - INFO - Checking conversation: 67e35f4173482db5112a with user: user_walidaboulaakoul
2025-03-26 17:38:24,640 - app.core.chat_service - INFO - Checking conversation: 67e35f41f17590b4af58 with user: user_walidaboulaakoul
2025-03-26 17:38:24,641 - app.core.chat_service - INFO - Checking conversation: 67e35f428c0b7580fbd9 with user: user_walidaboulaakoul
2025-03-26 17:38:24,641 - app.core.chat_service - INFO - Checking conversation: 67e35f430c559ac50191 with user: user_walidaboulaakoul
2025-03-26 17:38:24,642 - app.core.chat_service - INFO - Checking conversation: 67e35f437d04d2890942 with user: user_walidaboulaakoul
2025-03-26 17:38:24,642 - app.core.chat_service - INFO - Checking conversation: 67e35f43f2207daedea2 with user: user_walidaboulaakoul
2025-03-26 17:38:24,643 - app.core.chat_service - INFO - Checking conversation: 67e35f4470dcb03a2f01 with user: user_walidaboulaakoul
2025-03-26 17:38:24,643 - app.core.chat_service - INFO - Checking conversation: 67e35f44ecb48507a79a with user: user_walidaboulaakoul
2025-03-26 17:38:24,644 - app.core.chat_service - INFO - Checking conversation: 67e35f4572b4d7bfe4cb with user: user_walidaboulaakoul
2025-03-26 17:38:24,645 - app.core.chat_service - INFO - Checking conversation: 67e35f45f1fef455dfed with user: user_walidaboulaakoul
2025-03-26 17:38:24,648 - app.core.chat_service - INFO - Checking conversation: 67e35f4671f7b44c9a7e with user: user_walidaboulaakoul
2025-03-26 17:38:24,648 - app.core.chat_service - INFO - Checking conversation: 67e35f4997b461cc1f27 with user: user_walidaboulaakoul
2025-03-26 17:38:24,651 - app.core.chat_service - INFO - Checking conversation: 67e35f4a20c4da6b350f with user: user_walidaboulaakoul
2025-03-26 17:38:24,655 - app.core.chat_service - INFO - Returning 0 conversations for user user_test7035
2025-03-26 17:38:24,692 - app.main - ERROR - Request failed: object list can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 59, in list_conversations
    return await get_user_conversations(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object list can't be used in 'await' expression

2025-03-26 17:38:25,540 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 17:38:25,540 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:38:25,543 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:38:29,475 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:38:38,736 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 17:38:38,736 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:38:38,739 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:38:39,416 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:38:51,029 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 54, in create_conversation
    return await create_new_conversation(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression

2025-03-26 17:38:51,942 - app.core.chat_service - INFO - Getting conversations for user: user_test7035
2025-03-26 17:38:52,142 - app.core.chat_service - INFO - Got 25 total conversations
2025-03-26 17:38:52,143 - app.core.chat_service - INFO - Checking conversation: 67e20992e4a9ccf3980f with user: user_test
2025-03-26 17:38:52,144 - app.core.chat_service - INFO - Checking conversation: 67e20cf759a7e3e0797f with user: user_test
2025-03-26 17:38:52,144 - app.core.chat_service - INFO - Checking conversation: 67e20e95286137d70962 with user: user_test
2025-03-26 17:38:52,144 - app.core.chat_service - INFO - Checking conversation: 67e21efb2e0c820f3ff3 with user: user_test
2025-03-26 17:38:52,145 - app.core.chat_service - INFO - Checking conversation: 67e24311342bd0d8d7e0 with user: user_test
2025-03-26 17:38:52,145 - app.core.chat_service - INFO - Checking conversation: 67e3513396ff4ff88972 with user: user_test
2025-03-26 17:38:52,146 - app.core.chat_service - INFO - Checking conversation: 67e35ac34f0ae09325a4 with user: anon_d387e7430af1e011
2025-03-26 17:38:52,146 - app.core.chat_service - INFO - Checking conversation: 67e35f0275edae84daf8 with user: anon_8a8de7db14bec1ad
2025-03-26 17:38:52,147 - app.core.chat_service - INFO - Checking conversation: 67e35f31733aa9cae4eb with user: anon_9d3322d358e4ea48
2025-03-26 17:38:52,150 - app.core.chat_service - INFO - Checking conversation: 67e35f31b4506633a1c4 with user: anon_3bcd8615f647df01
2025-03-26 17:38:52,152 - app.core.chat_service - INFO - Checking conversation: 67e35f31e811f6db7ce0 with user: anon_a979daf531748451
2025-03-26 17:38:52,153 - app.core.chat_service - INFO - Checking conversation: 67e35f41092689b251ad with user: user_walidaboulaakoul
2025-03-26 17:38:52,156 - app.core.chat_service - INFO - Checking conversation: 67e35f4173482db5112a with user: user_walidaboulaakoul
2025-03-26 17:38:52,157 - app.core.chat_service - INFO - Checking conversation: 67e35f41f17590b4af58 with user: user_walidaboulaakoul
2025-03-26 17:38:52,159 - app.core.chat_service - INFO - Checking conversation: 67e35f428c0b7580fbd9 with user: user_walidaboulaakoul
2025-03-26 17:38:52,159 - app.core.chat_service - INFO - Checking conversation: 67e35f430c559ac50191 with user: user_walidaboulaakoul
2025-03-26 17:38:52,162 - app.core.chat_service - INFO - Checking conversation: 67e35f437d04d2890942 with user: user_walidaboulaakoul
2025-03-26 17:38:52,164 - app.core.chat_service - INFO - Checking conversation: 67e35f43f2207daedea2 with user: user_walidaboulaakoul
2025-03-26 17:38:52,165 - app.core.chat_service - INFO - Checking conversation: 67e35f4470dcb03a2f01 with user: user_walidaboulaakoul
2025-03-26 17:38:52,166 - app.core.chat_service - INFO - Checking conversation: 67e35f44ecb48507a79a with user: user_walidaboulaakoul
2025-03-26 17:38:52,167 - app.core.chat_service - INFO - Checking conversation: 67e35f4572b4d7bfe4cb with user: user_walidaboulaakoul
2025-03-26 17:38:52,167 - app.core.chat_service - INFO - Checking conversation: 67e35f45f1fef455dfed with user: user_walidaboulaakoul
2025-03-26 17:38:52,168 - app.core.chat_service - INFO - Checking conversation: 67e35f4671f7b44c9a7e with user: user_walidaboulaakoul
2025-03-26 17:38:52,169 - app.core.chat_service - INFO - Checking conversation: 67e35f4997b461cc1f27 with user: user_walidaboulaakoul
2025-03-26 17:38:52,170 - app.core.chat_service - INFO - Checking conversation: 67e35f4a20c4da6b350f with user: user_walidaboulaakoul
2025-03-26 17:38:52,171 - app.core.chat_service - INFO - Returning 0 conversations for user user_test7035
2025-03-26 17:38:52,203 - app.main - ERROR - Request failed: object list can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 59, in list_conversations
    return await get_user_conversations(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object list can't be used in 'await' expression

2025-03-26 17:38:53,040 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 17:38:53,040 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:38:53,043 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:38:53,766 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:40:14,474 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 17:40:29,733 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 17:40:32,291 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 54, in create_conversation
    return await create_new_conversation(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression

2025-03-26 17:40:32,789 - app.core.chat_service - INFO - Getting conversations for user: user_test5267
2025-03-26 17:40:32,966 - app.core.chat_service - INFO - Got 25 total conversations
2025-03-26 17:40:32,967 - app.core.chat_service - INFO - Checking conversation: 67e20992e4a9ccf3980f with user: user_test
2025-03-26 17:40:32,968 - app.core.chat_service - INFO - Checking conversation: 67e20cf759a7e3e0797f with user: user_test
2025-03-26 17:40:32,968 - app.core.chat_service - INFO - Checking conversation: 67e20e95286137d70962 with user: user_test
2025-03-26 17:40:32,969 - app.core.chat_service - INFO - Checking conversation: 67e21efb2e0c820f3ff3 with user: user_test
2025-03-26 17:40:32,969 - app.core.chat_service - INFO - Checking conversation: 67e24311342bd0d8d7e0 with user: user_test
2025-03-26 17:40:32,970 - app.core.chat_service - INFO - Checking conversation: 67e3513396ff4ff88972 with user: user_test
2025-03-26 17:40:32,970 - app.core.chat_service - INFO - Checking conversation: 67e35ac34f0ae09325a4 with user: anon_d387e7430af1e011
2025-03-26 17:40:32,971 - app.core.chat_service - INFO - Checking conversation: 67e35f0275edae84daf8 with user: anon_8a8de7db14bec1ad
2025-03-26 17:40:32,971 - app.core.chat_service - INFO - Checking conversation: 67e35f31733aa9cae4eb with user: anon_9d3322d358e4ea48
2025-03-26 17:40:32,972 - app.core.chat_service - INFO - Checking conversation: 67e35f31b4506633a1c4 with user: anon_3bcd8615f647df01
2025-03-26 17:40:32,972 - app.core.chat_service - INFO - Checking conversation: 67e35f31e811f6db7ce0 with user: anon_a979daf531748451
2025-03-26 17:40:32,973 - app.core.chat_service - INFO - Checking conversation: 67e35f41092689b251ad with user: user_walidaboulaakoul
2025-03-26 17:40:32,973 - app.core.chat_service - INFO - Checking conversation: 67e35f4173482db5112a with user: user_walidaboulaakoul
2025-03-26 17:40:32,974 - app.core.chat_service - INFO - Checking conversation: 67e35f41f17590b4af58 with user: user_walidaboulaakoul
2025-03-26 17:40:32,975 - app.core.chat_service - INFO - Checking conversation: 67e35f428c0b7580fbd9 with user: user_walidaboulaakoul
2025-03-26 17:40:32,976 - app.core.chat_service - INFO - Checking conversation: 67e35f430c559ac50191 with user: user_walidaboulaakoul
2025-03-26 17:40:32,977 - app.core.chat_service - INFO - Checking conversation: 67e35f437d04d2890942 with user: user_walidaboulaakoul
2025-03-26 17:40:32,977 - app.core.chat_service - INFO - Checking conversation: 67e35f43f2207daedea2 with user: user_walidaboulaakoul
2025-03-26 17:40:32,978 - app.core.chat_service - INFO - Checking conversation: 67e35f4470dcb03a2f01 with user: user_walidaboulaakoul
2025-03-26 17:40:32,979 - app.core.chat_service - INFO - Checking conversation: 67e35f44ecb48507a79a with user: user_walidaboulaakoul
2025-03-26 17:40:32,980 - app.core.chat_service - INFO - Checking conversation: 67e35f4572b4d7bfe4cb with user: user_walidaboulaakoul
2025-03-26 17:40:32,982 - app.core.chat_service - INFO - Checking conversation: 67e35f45f1fef455dfed with user: user_walidaboulaakoul
2025-03-26 17:40:32,983 - app.core.chat_service - INFO - Checking conversation: 67e35f4671f7b44c9a7e with user: user_walidaboulaakoul
2025-03-26 17:40:32,984 - app.core.chat_service - INFO - Checking conversation: 67e35f4997b461cc1f27 with user: user_walidaboulaakoul
2025-03-26 17:40:32,984 - app.core.chat_service - INFO - Checking conversation: 67e35f4a20c4da6b350f with user: user_walidaboulaakoul
2025-03-26 17:40:32,985 - app.core.chat_service - INFO - Returning 0 conversations for user user_test5267
2025-03-26 17:40:33,022 - app.main - ERROR - Request failed: object list can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 59, in list_conversations
    return await get_user_conversations(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object list can't be used in 'await' expression

2025-03-26 17:40:33,878 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 17:40:33,879 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:40:33,882 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:40:35,256 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:40:40,961 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 17:40:41,005 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:40:41,053 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:40:41,831 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:40:53,145 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 54, in create_conversation
    return await create_new_conversation(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression

2025-03-26 17:40:54,001 - app.core.chat_service - INFO - Getting conversations for user: user_test5267
2025-03-26 17:40:54,258 - app.core.chat_service - INFO - Got 25 total conversations
2025-03-26 17:40:54,259 - app.core.chat_service - INFO - Checking conversation: 67e20992e4a9ccf3980f with user: user_test
2025-03-26 17:40:54,259 - app.core.chat_service - INFO - Checking conversation: 67e20cf759a7e3e0797f with user: user_test
2025-03-26 17:40:54,260 - app.core.chat_service - INFO - Checking conversation: 67e20e95286137d70962 with user: user_test
2025-03-26 17:40:54,261 - app.core.chat_service - INFO - Checking conversation: 67e21efb2e0c820f3ff3 with user: user_test
2025-03-26 17:40:54,261 - app.core.chat_service - INFO - Checking conversation: 67e24311342bd0d8d7e0 with user: user_test
2025-03-26 17:40:54,262 - app.core.chat_service - INFO - Checking conversation: 67e3513396ff4ff88972 with user: user_test
2025-03-26 17:40:54,262 - app.core.chat_service - INFO - Checking conversation: 67e35ac34f0ae09325a4 with user: anon_d387e7430af1e011
2025-03-26 17:40:54,262 - app.core.chat_service - INFO - Checking conversation: 67e35f0275edae84daf8 with user: anon_8a8de7db14bec1ad
2025-03-26 17:40:54,263 - app.core.chat_service - INFO - Checking conversation: 67e35f31733aa9cae4eb with user: anon_9d3322d358e4ea48
2025-03-26 17:40:54,266 - app.core.chat_service - INFO - Checking conversation: 67e35f31b4506633a1c4 with user: anon_3bcd8615f647df01
2025-03-26 17:40:54,266 - app.core.chat_service - INFO - Checking conversation: 67e35f31e811f6db7ce0 with user: anon_a979daf531748451
2025-03-26 17:40:54,267 - app.core.chat_service - INFO - Checking conversation: 67e35f41092689b251ad with user: user_walidaboulaakoul
2025-03-26 17:40:54,268 - app.core.chat_service - INFO - Checking conversation: 67e35f4173482db5112a with user: user_walidaboulaakoul
2025-03-26 17:40:54,269 - app.core.chat_service - INFO - Checking conversation: 67e35f41f17590b4af58 with user: user_walidaboulaakoul
2025-03-26 17:40:54,270 - app.core.chat_service - INFO - Checking conversation: 67e35f428c0b7580fbd9 with user: user_walidaboulaakoul
2025-03-26 17:40:54,270 - app.core.chat_service - INFO - Checking conversation: 67e35f430c559ac50191 with user: user_walidaboulaakoul
2025-03-26 17:40:54,271 - app.core.chat_service - INFO - Checking conversation: 67e35f437d04d2890942 with user: user_walidaboulaakoul
2025-03-26 17:40:54,271 - app.core.chat_service - INFO - Checking conversation: 67e35f43f2207daedea2 with user: user_walidaboulaakoul
2025-03-26 17:40:54,272 - app.core.chat_service - INFO - Checking conversation: 67e35f4470dcb03a2f01 with user: user_walidaboulaakoul
2025-03-26 17:40:54,272 - app.core.chat_service - INFO - Checking conversation: 67e35f44ecb48507a79a with user: user_walidaboulaakoul
2025-03-26 17:40:54,273 - app.core.chat_service - INFO - Checking conversation: 67e35f4572b4d7bfe4cb with user: user_walidaboulaakoul
2025-03-26 17:40:54,274 - app.core.chat_service - INFO - Checking conversation: 67e35f45f1fef455dfed with user: user_walidaboulaakoul
2025-03-26 17:40:54,275 - app.core.chat_service - INFO - Checking conversation: 67e35f4671f7b44c9a7e with user: user_walidaboulaakoul
2025-03-26 17:40:54,276 - app.core.chat_service - INFO - Checking conversation: 67e35f4997b461cc1f27 with user: user_walidaboulaakoul
2025-03-26 17:40:54,276 - app.core.chat_service - INFO - Checking conversation: 67e35f4a20c4da6b350f with user: user_walidaboulaakoul
2025-03-26 17:40:54,277 - app.core.chat_service - INFO - Returning 0 conversations for user user_test5267
2025-03-26 17:40:54,312 - app.main - ERROR - Request failed: object list can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 59, in list_conversations
    return await get_user_conversations(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object list can't be used in 'await' expression

2025-03-26 17:40:55,441 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 17:40:55,442 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:40:55,445 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:40:56,168 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:42:14,169 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 54, in create_conversation
    return await create_new_conversation(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression

2025-03-26 17:42:15,029 - app.core.chat_service - INFO - Getting conversations for user: user_test4639
2025-03-26 17:42:15,295 - app.core.chat_service - INFO - Got 25 total conversations
2025-03-26 17:42:15,441 - app.core.chat_service - INFO - Checking conversation: 67e20992e4a9ccf3980f with user: user_test
2025-03-26 17:42:15,456 - app.core.chat_service - INFO - Checking conversation: 67e20cf759a7e3e0797f with user: user_test
2025-03-26 17:42:15,469 - app.core.chat_service - INFO - Checking conversation: 67e20e95286137d70962 with user: user_test
2025-03-26 17:42:15,527 - app.core.chat_service - INFO - Checking conversation: 67e21efb2e0c820f3ff3 with user: user_test
2025-03-26 17:42:15,538 - app.core.chat_service - INFO - Checking conversation: 67e24311342bd0d8d7e0 with user: user_test
2025-03-26 17:42:15,548 - app.core.chat_service - INFO - Checking conversation: 67e3513396ff4ff88972 with user: user_test
2025-03-26 17:42:15,551 - app.core.chat_service - INFO - Checking conversation: 67e35ac34f0ae09325a4 with user: anon_d387e7430af1e011
2025-03-26 17:42:15,553 - app.core.chat_service - INFO - Checking conversation: 67e35f0275edae84daf8 with user: anon_8a8de7db14bec1ad
2025-03-26 17:42:15,561 - app.core.chat_service - INFO - Checking conversation: 67e35f31733aa9cae4eb with user: anon_9d3322d358e4ea48
2025-03-26 17:42:15,566 - app.core.chat_service - INFO - Checking conversation: 67e35f31b4506633a1c4 with user: anon_3bcd8615f647df01
2025-03-26 17:42:15,572 - app.core.chat_service - INFO - Checking conversation: 67e35f31e811f6db7ce0 with user: anon_a979daf531748451
2025-03-26 17:42:15,573 - app.core.chat_service - INFO - Checking conversation: 67e35f41092689b251ad with user: user_walidaboulaakoul
2025-03-26 17:42:15,575 - app.core.chat_service - INFO - Checking conversation: 67e35f4173482db5112a with user: user_walidaboulaakoul
2025-03-26 17:42:15,576 - app.core.chat_service - INFO - Checking conversation: 67e35f41f17590b4af58 with user: user_walidaboulaakoul
2025-03-26 17:42:15,578 - app.core.chat_service - INFO - Checking conversation: 67e35f428c0b7580fbd9 with user: user_walidaboulaakoul
2025-03-26 17:42:15,580 - app.core.chat_service - INFO - Checking conversation: 67e35f430c559ac50191 with user: user_walidaboulaakoul
2025-03-26 17:42:15,584 - app.core.chat_service - INFO - Checking conversation: 67e35f437d04d2890942 with user: user_walidaboulaakoul
2025-03-26 17:42:15,590 - app.core.chat_service - INFO - Checking conversation: 67e35f43f2207daedea2 with user: user_walidaboulaakoul
2025-03-26 17:42:15,600 - app.core.chat_service - INFO - Checking conversation: 67e35f4470dcb03a2f01 with user: user_walidaboulaakoul
2025-03-26 17:42:15,602 - app.core.chat_service - INFO - Checking conversation: 67e35f44ecb48507a79a with user: user_walidaboulaakoul
2025-03-26 17:42:15,646 - app.core.chat_service - INFO - Checking conversation: 67e35f4572b4d7bfe4cb with user: user_walidaboulaakoul
2025-03-26 17:42:15,661 - app.core.chat_service - INFO - Checking conversation: 67e35f45f1fef455dfed with user: user_walidaboulaakoul
2025-03-26 17:42:15,670 - app.core.chat_service - INFO - Checking conversation: 67e35f4671f7b44c9a7e with user: user_walidaboulaakoul
2025-03-26 17:42:15,672 - app.core.chat_service - INFO - Checking conversation: 67e35f4997b461cc1f27 with user: user_walidaboulaakoul
2025-03-26 17:42:15,673 - app.core.chat_service - INFO - Checking conversation: 67e35f4a20c4da6b350f with user: user_walidaboulaakoul
2025-03-26 17:42:15,675 - app.core.chat_service - INFO - Returning 0 conversations for user user_test4639
2025-03-26 17:42:15,723 - app.main - ERROR - Request failed: object list can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 59, in list_conversations
    return await get_user_conversations(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object list can't be used in 'await' expression

2025-03-26 17:42:16,524 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 17:42:16,524 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:42:16,528 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:42:17,273 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:42:17,481 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 17:42:19,977 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 17:42:19,978 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:42:19,980 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:42:20,621 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:42:27,022 - app.main - ERROR - Request failed: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 54, in create_conversation
    return await create_new_conversation(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression

2025-03-26 17:42:27,968 - app.core.chat_service - INFO - Getting conversations for user: user_test4639
2025-03-26 17:42:28,166 - app.core.chat_service - INFO - Got 25 total conversations
2025-03-26 17:42:28,167 - app.core.chat_service - INFO - Checking conversation: 67e20992e4a9ccf3980f with user: user_test
2025-03-26 17:42:28,167 - app.core.chat_service - INFO - Checking conversation: 67e20cf759a7e3e0797f with user: user_test
2025-03-26 17:42:28,168 - app.core.chat_service - INFO - Checking conversation: 67e20e95286137d70962 with user: user_test
2025-03-26 17:42:28,168 - app.core.chat_service - INFO - Checking conversation: 67e21efb2e0c820f3ff3 with user: user_test
2025-03-26 17:42:28,168 - app.core.chat_service - INFO - Checking conversation: 67e24311342bd0d8d7e0 with user: user_test
2025-03-26 17:42:28,169 - app.core.chat_service - INFO - Checking conversation: 67e3513396ff4ff88972 with user: user_test
2025-03-26 17:42:28,169 - app.core.chat_service - INFO - Checking conversation: 67e35ac34f0ae09325a4 with user: anon_d387e7430af1e011
2025-03-26 17:42:28,169 - app.core.chat_service - INFO - Checking conversation: 67e35f0275edae84daf8 with user: anon_8a8de7db14bec1ad
2025-03-26 17:42:28,171 - app.core.chat_service - INFO - Checking conversation: 67e35f31733aa9cae4eb with user: anon_9d3322d358e4ea48
2025-03-26 17:42:28,172 - app.core.chat_service - INFO - Checking conversation: 67e35f31b4506633a1c4 with user: anon_3bcd8615f647df01
2025-03-26 17:42:28,175 - app.core.chat_service - INFO - Checking conversation: 67e35f31e811f6db7ce0 with user: anon_a979daf531748451
2025-03-26 17:42:28,176 - app.core.chat_service - INFO - Checking conversation: 67e35f41092689b251ad with user: user_walidaboulaakoul
2025-03-26 17:42:28,177 - app.core.chat_service - INFO - Checking conversation: 67e35f4173482db5112a with user: user_walidaboulaakoul
2025-03-26 17:42:28,178 - app.core.chat_service - INFO - Checking conversation: 67e35f41f17590b4af58 with user: user_walidaboulaakoul
2025-03-26 17:42:28,179 - app.core.chat_service - INFO - Checking conversation: 67e35f428c0b7580fbd9 with user: user_walidaboulaakoul
2025-03-26 17:42:28,179 - app.core.chat_service - INFO - Checking conversation: 67e35f430c559ac50191 with user: user_walidaboulaakoul
2025-03-26 17:42:28,179 - app.core.chat_service - INFO - Checking conversation: 67e35f437d04d2890942 with user: user_walidaboulaakoul
2025-03-26 17:42:28,180 - app.core.chat_service - INFO - Checking conversation: 67e35f43f2207daedea2 with user: user_walidaboulaakoul
2025-03-26 17:42:28,180 - app.core.chat_service - INFO - Checking conversation: 67e35f4470dcb03a2f01 with user: user_walidaboulaakoul
2025-03-26 17:42:28,181 - app.core.chat_service - INFO - Checking conversation: 67e35f44ecb48507a79a with user: user_walidaboulaakoul
2025-03-26 17:42:28,181 - app.core.chat_service - INFO - Checking conversation: 67e35f4572b4d7bfe4cb with user: user_walidaboulaakoul
2025-03-26 17:42:28,181 - app.core.chat_service - INFO - Checking conversation: 67e35f45f1fef455dfed with user: user_walidaboulaakoul
2025-03-26 17:42:28,182 - app.core.chat_service - INFO - Checking conversation: 67e35f4671f7b44c9a7e with user: user_walidaboulaakoul
2025-03-26 17:42:28,183 - app.core.chat_service - INFO - Checking conversation: 67e35f4997b461cc1f27 with user: user_walidaboulaakoul
2025-03-26 17:42:28,184 - app.core.chat_service - INFO - Checking conversation: 67e35f4a20c4da6b350f with user: user_walidaboulaakoul
2025-03-26 17:42:28,184 - app.core.chat_service - INFO - Returning 0 conversations for user user_test4639
2025-03-26 17:42:28,219 - app.main - ERROR - Request failed: object list can't be used in 'await' expression
Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/anyio/streams/memory.py", line 104, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/main.py", line 61, in add_process_time_header
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 153, in call_next
    raise app_exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/walid/vs code testing/arabia/project_root/app/api/endpoints/chat.py", line 59, in list_conversations
    return await get_user_conversations(user["user_id"])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object list can't be used in 'await' expression

2025-03-26 17:42:28,995 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 17:42:28,996 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:42:28,999 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:42:29,713 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:42:29,902 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 17:50:45,156 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 17:51:01,890 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 17:51:13,658 - app.core.chat_service - INFO - Getting conversations for user: user_test12718
2025-03-26 17:51:13,840 - app.core.chat_service - INFO - Got 1 conversations for user: user_test12718
2025-03-26 17:51:14,771 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 17:51:14,772 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:51:14,775 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:51:17,777 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:51:24,312 - app.api.endpoints.chat - INFO - Found conversation: 67e43e9086a88c3a8eee for user: user_test12718
2025-03-26 17:51:24,976 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 17:51:24,977 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:51:24,989 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:51:25,737 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:51:34,758 - app.core.chat_service - INFO - Getting conversations for user: user_test12718
2025-03-26 17:51:34,985 - app.core.chat_service - INFO - Got 2 conversations for user: user_test12718
2025-03-26 17:51:35,420 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 17:51:35,422 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:51:35,424 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:51:36,166 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:51:36,367 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 17:51:39,355 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 17:51:39,356 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:51:39,358 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:51:40,128 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:52:29,614 - app.core.chat_service - INFO - Getting conversations for user: user_test21086
2025-03-26 17:52:29,850 - app.core.chat_service - INFO - Got 1 conversations for user: user_test21086
2025-03-26 17:52:31,100 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 17:52:31,104 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:52:31,108 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:52:32,035 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:52:39,394 - app.api.endpoints.chat - INFO - Found conversation: 67e43edc5eea71f6f753 for user: user_test21086
2025-03-26 17:52:40,239 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 17:52:40,240 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:52:40,246 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:52:41,427 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:52:57,142 - app.core.chat_service - INFO - Getting conversations for user: user_test21086
2025-03-26 17:52:57,412 - app.core.chat_service - INFO - Got 2 conversations for user: user_test21086
2025-03-26 17:52:58,446 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 17:52:58,446 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:52:58,459 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:52:59,270 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 17:53:04,048 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 17:53:04,051 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 17:53:04,065 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 17:53:04,905 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:02:38,468 - app.core.chat_service - INFO - Getting conversations for user: user_test23144
2025-03-26 18:02:38,697 - app.core.chat_service - INFO - Got 1 conversations for user: user_test23144
2025-03-26 18:02:39,659 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 18:02:39,660 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:02:39,664 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:02:40,692 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:02:48,503 - app.api.endpoints.chat - INFO - Found conversation: 67e4413d8aa1929d2a27 for user: user_test23144
2025-03-26 18:02:49,805 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 18:02:49,806 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:02:49,810 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:02:50,821 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:03:00,858 - app.core.chat_service - INFO - Getting conversations for user: user_test23144
2025-03-26 18:03:01,073 - app.core.chat_service - INFO - Got 2 conversations for user: user_test23144
2025-03-26 18:03:01,968 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Ibn Sina...'
2025-03-26 18:03:01,969 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:03:01,972 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:03:02,216 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:03:10,180 - app.core.retrieval - INFO - Generated embedding for query: 'What did Ibn Sina contribute to medicine?...'
2025-03-26 18:03:10,181 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:03:10,186 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:03:10,994 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:17:32,663 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 18:17:32,666 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:17:32,681 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:17:33,581 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:17:42,075 - app.api.endpoints.chat - INFO - Found conversation: 67e444bac2abf581dcf5 for user: user_test2920
2025-03-26 18:17:43,478 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 18:17:43,479 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:17:43,489 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:17:43,995 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:17:54,847 - app.api.endpoints.chat - INFO - Found conversation: 67e444bac2abf581dcf5 for user: user_test2920
2025-03-26 18:17:55,920 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Imam al-Shafi'i's contributions to I...'
2025-03-26 18:17:55,921 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 18:17:55,926 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 18:17:56,635 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 18:17:56,834 - app.core.chat_service - ERROR - API Error: 429 - {"message":"Requests rate limit exceeded"}
2025-03-26 18:17:59,041 - app.api.endpoints.chat - INFO - Found conversation: 67e444bac2abf581dcf5 for user: user_test2920
2025-03-26 18:30:51,500 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 20:01:51,601 - app.main - INFO - Configuring CORS with allowed origins: ['https://maktaba-shamela-ai.vercel.app']
2025-03-26 20:01:51,633 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 20:02:36,158 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 20:02:36,159 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 20:02:36,163 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 20:02:37,588 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 20:02:37,591 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 20:02:42,878 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 20:02:44,722 - app.api.endpoints.chat - INFO - Found conversation: 67e45d5a8abef43f23ff for user: user_test18110
2025-03-26 20:02:45,750 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 20:02:45,751 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 20:02:45,753 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 20:02:46,599 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 20:02:46,601 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 20:02:46,760 - app.core.chat_service - WARNING - Rate limit (429) hit. Retrying in 1.58 seconds...
2025-03-26 20:04:00,005 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 20:04:01,894 - app.api.endpoints.chat - INFO - Found conversation: 67e45d5a8abef43f23ff for user: user_test18110
2025-03-26 20:04:03,223 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Imam al-Shafi'i's contributions to I...'
2025-03-26 20:04:03,224 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 20:04:03,227 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 20:04:03,950 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 20:04:03,953 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 20:04:04,152 - app.core.chat_service - WARNING - Rate limit (429) hit. Retrying in 1.22 seconds...
2025-03-26 20:04:11,220 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 20:04:12,969 - app.api.endpoints.chat - INFO - Found conversation: 67e45d5a8abef43f23ff for user: user_test18110
2025-03-26 20:18:12,208 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 20:18:12,210 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 20:18:12,236 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 20:18:13,555 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 20:18:13,559 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 20:18:19,565 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 20:18:21,321 - app.api.endpoints.chat - INFO - Found conversation: 67e46102a7c7d2999657 for user: user_test27823
2025-03-26 20:18:22,396 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 20:18:22,397 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 20:18:22,400 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 20:18:23,207 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 20:18:23,210 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 20:18:33,914 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 20:18:35,336 - app.main - INFO - Application shutdown: cleaning up resources
2025-03-26 20:18:51,977 - app.main - INFO - Configuring CORS with allowed origins: ['https://maktaba-shamela-ai.vercel.app']
2025-03-26 20:18:52,006 - app.main - INFO - Application startup: initializing services and connections
2025-03-26 20:18:52,243 - app.api.endpoints.chat - INFO - Found conversation: 67e46102a7c7d2999657 for user: user_test27823
2025-03-26 20:18:53,124 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Imam al-Shafi'i's contributions to I...'
2025-03-26 20:18:53,124 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 20:18:53,131 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 20:18:54,246 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 20:18:54,249 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 20:19:00,845 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 20:19:00,846 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 20:19:01,363 - app.api.endpoints.chat - INFO - Found conversation: 67e46102a7c7d2999657 for user: user_test27823
2025-03-26 22:57:46,382 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 22:57:46,384 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:57:46,407 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:57:47,399 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:57:47,402 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:57:55,699 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:57:55,700 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:57:57,106 - app.api.endpoints.chat - INFO - Found conversation: 67e48668d21e4f735404 for user: user_test27185
2025-03-26 22:57:58,064 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 22:57:58,065 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:57:58,068 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:57:58,696 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:57:58,698 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:58:06,046 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:58:06,046 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:58:07,813 - app.api.endpoints.chat - INFO - Found conversation: 67e48668d21e4f735404 for user: user_test27185
2025-03-26 22:58:09,146 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Imam al-Shafi'i's contributions to I...'
2025-03-26 22:58:09,146 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:58:09,150 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:58:10,124 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:58:10,127 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:58:16,507 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:58:16,508 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:58:17,999 - app.api.endpoints.chat - INFO - Found conversation: 67e48668d21e4f735404 for user: user_test27185
2025-03-26 22:58:26,942 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 22:58:26,942 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:58:26,945 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:58:27,585 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:58:27,588 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:58:33,052 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:58:33,053 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:58:34,580 - app.api.endpoints.chat - INFO - Found conversation: 67e48691748603c81a62 for user: user_test32287
2025-03-26 22:58:35,476 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 22:58:35,476 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:58:35,480 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:58:35,996 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:58:35,998 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:58:44,439 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:58:44,440 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:58:46,261 - app.api.endpoints.chat - INFO - Found conversation: 67e48691748603c81a62 for user: user_test32287
2025-03-26 22:58:47,282 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Imam al-Shafi'i's contributions to I...'
2025-03-26 22:58:47,283 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:58:47,287 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:58:48,088 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:58:48,091 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:58:54,645 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:58:54,647 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:58:56,050 - app.api.endpoints.chat - INFO - Found conversation: 67e48691748603c81a62 for user: user_test32287
2025-03-26 22:58:57,127 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Islamic jurisprudence...'
2025-03-26 22:58:57,128 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:58:57,131 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:58:58,059 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:58:58,062 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:59:04,759 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:59:04,759 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:59:06,284 - app.api.endpoints.chat - INFO - Found conversation: 67e486afb54dd50b63d1 for user: user_test4286
2025-03-26 22:59:07,245 - app.core.retrieval - INFO - Generated embedding for query: 'Explain the differences between the schools of tho...'
2025-03-26 22:59:07,246 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:59:07,249 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:59:07,905 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:59:07,907 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:59:17,475 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:59:17,476 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:59:20,293 - app.api.endpoints.chat - INFO - Found conversation: 67e486afb54dd50b63d1 for user: user_test4286
2025-03-26 22:59:20,998 - app.core.retrieval - INFO - Generated embedding for query: 'Tell me about Imam al-Shafi'i's contributions to I...'
2025-03-26 22:59:20,999 - app.core.clients - INFO - Initializing Pinecone client
2025-03-26 22:59:21,011 - app.core.clients - INFO - Getting Pinecone index: shamela
2025-03-26 22:59:22,131 - app.core.retrieval - INFO - Found 5 matches in vector store
2025-03-26 22:59:22,133 - app.core.chat_service - INFO - Calling Mistral API with retry (max attempts: 3)
2025-03-26 22:59:28,940 - app.core.chat_service - INFO - Mistral API call successful
2025-03-26 22:59:28,941 - app.core.chat_service - INFO - Using Mistral response
2025-03-26 22:59:30,538 - app.api.endpoints.chat - INFO - Found conversation: 67e486afb54dd50b63d1 for user: user_test4286
